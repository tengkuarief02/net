<script>
const base = location.origin;

function getImage(d){
  let img =
    d.cover ||
    d.coverImage ||
    d.poster ||
    d.image ||
    d.thumbnail ||
    '';

  if (!img) return 'https://via.placeholder.com/300x450?text=No+Image';

  // paksa https
  if (img.startsWith('http://')) {
    img = img.replace('http://', 'https://');
  }

  return img;
}

function render(el, list){
  el.innerHTML = '';
  if (!list || !list.length){
    el.innerHTML = '<div>Tidak ada data</div>';
    return;
  }

  list.forEach(d=>{
    el.innerHTML += `
      <a class="card" href="episodes.html?id=${d.shortPlayId}">
        <img src="${getImage(d)}" loading="lazy">
        <div>${d.title || 'Untitled'}</div>
      </a>
    `;
  });
}

fetch(base + '/api/theaters')
.then(r=>r.json())
.then(j=>render(theaters, j.data || j.result))
.catch(()=>theaters.innerHTML='Error load theaters');

fetch(base + '/api/foryou')
.then(r=>r.json())
.then(j=>render(foryou, j.data || j.result))
.catch(()=>foryou.innerHTML='Error load for you');
</script>
